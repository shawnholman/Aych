!function(e,t){for(var r in t)e[r]=t[r]}(this,function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";function i(e){return void 0!==e&&void 0!==e.render}function s(e){return void 0!==e&&"string"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.removeSpaces=t.kebabToCamelCase=t.merge=t.isAttributes=t.isString=t.isRenderable=void 0,t.isRenderable=i,t.isString=s,t.isAttributes=function(e){return void 0!==e&&!s(e)&&!i(e)},t.merge=function(e,t){return Object.assign(Object.assign({},t),e)},t.kebabToCamelCase=function(e){return e.replace(/-([a-z])/g,e=>e[1].toUpperCase())},t.removeSpaces=function(e){return e.split("\n").map(e=>e.trim()).join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Renderable=void 0;const i=r(0);t.Renderable=class{constructor(){this.templates={},this.canRender=!0,this.toString=()=>this.render()}with(e){return this.templates=e,this}when(e){return this.canRender=e,this}append(e,t=!1){return this.templates=t?i.merge(e,this.templates):i.merge(this.templates,e),this}render(e,t){return(null==t?void 0:t.prioritizeRenderTemplates)?this.canRender?this.internalRender(i.merge(e,this.templates)):"":this.canRender?this.internalRender(i.merge(this.templates,e)):""}get r(){return this.render()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringLiteral=void 0;const i=r(3),s=r(1),n=r(0);new RegExp("{{"+"\\s*"+"(([\\w-_][\\w\\d-_]*(\\[-?\\d+\\])?\\??)(\\.[\\w-_][\\w\\d-_]*(\\[-?\\d+\\])?\\??)*)"+("("+("\\s*\\"+"|"+"\\s*")+"(([\\w-_][\\w\\d-_]*)(\\((([\\w\\d]+)(,\\s*[\\w\\d]+)*)?\\))?))?")+("\\s*"+"}}"),"g");class a extends s.Renderable{constructor(e,t=!0){super(),n.isString(e)||(e=e.toString()),this.string=t?a.escapeHtml(e):e}internalRender(e){return i.TemplateParser.template(this.string,e)}static escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}}t.StringLiteral=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateParser=void 0;const i=r(6);class s{static template(e,t){return s.probablyHasTemplates(e)?e.replace(s.TEMPLATE_TAG,(...e)=>{const r=e[s.templateIndex.key],n=e[s.templateIndex.pipeFuncName],a=e[s.templateIndex.pipeParams],o=s.getValueFromObject(t,r);return i.Piper.pipe(o,n,a)}):e}static evaluate(e,t){if(!(e=e.trim()).match(s.EXACT_TEMPLATE_TAG))return!1;return"true"===s.template(e,t)}static probablyHasTemplates(e){return e.includes(s.tags.start)&&e.includes(s.tags.end)}static getValueFromObject(e,t){const r=t.split(".").map(this.parseKey);let i=e,s=void 0;for(let e of r){if(!Object.prototype.hasOwnProperty.call(i,e.value)){if(e.isOptional)return"";if(void 0===s)throw new Error(e.value+" is undefined.");throw new Error(e.value+` is not a property of ${s}.`)}if(e.isArray){const t=e.array.index,r=i[e.value];if(!Array.isArray(r))throw new Error(e.value+" is not an array.");if(t<0||t>=r.length){if(e.isOptional)return"";throw new Error(`Index out of bounds: ${e.value}[${t}].`)}i=r[t],s=e.value}else i=i[e.value],s=e.value}return i.toString()}static parseKey(e){let t=!1;(e=e.trim()).endsWith("?")&&(t=!0,e=e.slice(0,-1));const r=e.match(/^([\w-_][\w\d-_]*)\[([-]?\d+)]$/);let i=-1;return r&&(e=r[1],i=parseInt(r[2])),{value:e,isOptional:t,isArray:!!r,array:r?{index:i}:null}}}t.TemplateParser=s,s.tags={start:"{{",end:"}}",pipe:"|"},s.bufferedTags={start:s.tags.start+"\\s*",end:"\\s*"+s.tags.end,pipe:"\\s*\\"+s.tags.pipe+"\\s*"},s.FULL_IDENTIFIER="(([\\w-_][\\w\\d-_]*(\\[-?\\d+\\])?\\??)(\\.[\\w-_][\\w\\d-_]*(\\[-?\\d+\\])?\\??)*)",s.FILTER="("+s.bufferedTags.pipe+"(([\\w-_<>=!][\\w\\d-_<>=!]*)(\\((([\\w\\d ]+)(,\\s*[\\w\\d ]+)*)?\\))?))?",s.TEMPLATE_TAG_STRING=s.bufferedTags.start+s.FULL_IDENTIFIER+s.FILTER+s.bufferedTags.end,s.TEMPLATE_TAG=new RegExp(s.TEMPLATE_TAG_STRING,"g"),s.EXACT_TEMPLATE_TAG=new RegExp("^"+s.TEMPLATE_TAG_STRING+"$"),s.templateIndex={key:1,pipeFuncName:8,pipeParams:10}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Aych=void 0;const i=r(9),s=r(10),n=r(6),a=r(2),o=r(11),l=r(7),u=r(12),d=r(13),c=r(0),h=/^[a-zA-Z][a-zA-Z0-9]*(-[a-zA-Z]+)*$/g,p=/^[a-zA-Z]+$/g;class f{static create(e,t){if(!(e=e.trim()).match(h))throw new Error("Tag names should start with a letter and only contain letters, numbers, and dashes between two characters (yes: the-tag-name, no: the---tag---name).");const r=c.kebabToCamelCase(e);if(t==f.ElementType.NESTED){const t=function(t,r,...i){return new s.NestableElement(e,t,r,...i)};f.define(r,t)}else{if(t!=f.ElementType.EMPTY)throw new Error("ElementType does not exist: "+t);{const t=function(t,r){return new i.EmptyElement(e,t,r)};f.define(r,t)}}return e}static destroy(e){e=c.kebabToCamelCase(e.trim()),Object.prototype.hasOwnProperty.call(f.prototype,e)&&delete f.prototype[e]}static compose(e,t){if(!(e=e.trim()).match(p))throw new Error("Composition names should start with a letter or underscore and only contain letters, numbers, dashed, and underscores throughout.");f.define(e,t)}string(e){return c.isString(e)||(e=e.toString()),new a.StringLiteral(e)}unescaped(e){return new a.StringLiteral(e,!1)}$(e,t={},r=!0){f.isScoped=!0;const i=e.call(null,this);return f.isScoped=!1,f.scoped.forEach(f.destroy),c.isString(i)?r?i:new a.StringLiteral(i,!1):c.isRenderable(i)?r?i.render(t):i:void 0}$each(e,t,r,i){return new o.Each(e,t,r,i)}$eachIn(e,t){return new o.Each(Object.entries(e),t)}$repeat(e,t){return new o.Each([...Array(e).keys()],t)}$group(...e){return new l.Group(...e)}$if(e,t,r){return new u.If(e,t,r)}$switch(e,...t){return c.isString(e),new d.Switch(e,...t)}$case(e,t){return c.isString(e),new d.Switch.Case(e,t)}static define(e,t,r=!0,i=!1){let s=e.trim();if(Object.prototype.hasOwnProperty.call(f.prototype,s))throw new Error(`You cannot define ${s} on Aych because it already exists. Please call Aych.destroy("${s}") before redefining.`);f.isScoped&&f.scoped.push(s),Object.defineProperty(f.prototype,s,{value:t,configurable:r,writable:i})}}t.Aych=f,f.scoped=[],f.isScoped=!1,f.Piper=n.Piper,function(e){let t;!function(e){e[e.NESTED=0]="NESTED",e[e.EMPTY=1]="EMPTY"}(t=e.ElementType||(e.ElementType={}))}(f=t.Aych||(t.Aych={}));["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video"].forEach(e=>f.create(e,f.ElementType.NESTED));["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].forEach(e=>f.create(e,f.ElementType.EMPTY))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Element=void 0;const i=r(1),s=r(0),n=r(3);class a extends i.Renderable{constructor(e,t,r){if(super(),this.attributes={},this.tag=e.toLowerCase(),s.isString(t)&&a.isIdentifierString(t))this.setIdentifierString(t);else{if(!s.isAttributes(t))return;this.setAttributes(t)}if(r){if(s.isAttributes(t)||!s.isAttributes(r))throw new Error("Attributes field has been declared twice.");this.setAttributes(r)}}getTag(){return this.tag}getId(){return Object.prototype.hasOwnProperty.call(this.attributes,"id")?this.attributes.id:null}getClassList(){return Object.prototype.hasOwnProperty.call(this.attributes,"class")?this.attributes.class.split(" "):[]}getAttributes(){return this.attributes}setId(e){return this.setAttribute("id",e),this}setClassList(e){return e.length&&this.setAttribute("class",e.join(" ")),this}setIdentifiers(e){return a.isIdentifierString(e)?this.setIdentifierString(e):console.warn("Identifier string was not valid. Setter had no effect."),this}setAttributes(e){for(let t in e)this.setAttribute(t,e[t]);return this}setAttribute(e,t){if(Array.isArray(t))if(t[0])t=t[1];else{if(3!==t.length)return this;t=t[2]}if(null!==t&&"class"===e){const e=Object.prototype.hasOwnProperty.call(this.attributes,"class");if(t.startsWith("+"))return e?this.attributes.class.includes(t.substr(1))||(this.attributes.class+=" "+t.substr(1)):this.attributes.class=t.substr(1),this;if(t.startsWith("-")){if(!e)return this;const r=new RegExp(" ?"+t.substr(1));return this.attributes.class=this.attributes.class.replace(r,""),this}}return this.attributes[e]=t,this}static isIdentifierString(e){const t=e.trim();return 0!==t.length&&null!==t.match(/^(#[A-z-_][A-z0-9-_]*)?([.][A-z-_][A-z0-9-_]*)*$/)}setIdentifierString(e){const t=e.trim().split(".");t[0].startsWith("#")?this.setId(t.shift().substr(1)):t.shift(),this.setClassList(t)}getHtmlAttributeList(e){const t=Object.entries(this.getAttributes()).reduce((e,[t,r])=>null===r?e+" "+t:e+` ${t}="${r}"`,"");return e?n.TemplateParser.template(t,e):t}}t.Element=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Piper=void 0;const i=r(0);class s{static register(e,t){this.addPipe(e,t,!1)}static deregister(e){let t;try{t=this.findPipeName(e)}catch(e){return!1}for(const e of s.aliasLinks.get(t))s.pipes.delete(e);return s.aliasLinks.delete(t),s.pipes.delete(t)}static update(e,t){this.copy(e,e,!1,t)}static alias(e,t){if(e===t)throw new Error("Cannot alias with the same pipe name.");if(s.pipes.has(t))throw new Error(`Pipe already exists: ${t}.`);this.copy(this.findPipeName(e),t,!0)}static copy(e,t,r=!1,i){if(r&&i)throw new Error("Alias should retain original function.");let n=this.findPipeName(e);if(i){let e=i.bind(this,s.pipes.get(n));this.addPipe(t,e,!0)}else r?(s.aliasLinks.get(n).push(t),s.pipes.set(t,n)):this.register(t,s.pipes.get(n))}static pipe(e,t,r){if(void 0!==t){const i=this.findPipeName(t),n=s.parsePipeParameters(r);return s.pipes.get(i).call(this,e,...n).toString()}return e}static addPipe(e,t,r){if(!(e=e.trim()).match(/^[a-zA-Z]+$/g))throw new Error("Pipe names must only contain letters. Whitespaces are trimmed.");if(!r&&s.pipes.has(e))throw new Error(`Pipe already exists: ${e}.`);s.aliasLinks.set(e,[]),s.pipes.set(e,t)}static parsePipeParameters(e){return(void 0!==e?e.split(/\s*,\s*/):[]).map(e=>isNaN(parseFloat(e))?"true"===e||"false"!==e&&e:parseFloat(e))}static findPipeName(e){let t=s.pipes.get(e.trim());if(!t)throw new Error(`Pipe does not exist: ${e}.`);return i.isString(t)?t:e}}t.Piper=s,s.pipes=new Map([["lowercase",e=>e.toLowerCase()],["uppercase",e=>e.toUpperCase()],["substr",(e,t,r)=>e.substr(t,r)],["==",(e,t)=>e===t.toString()],["!=",(e,t)=>e!==t.toString()],[">",(e,t)=>Number(e)>t],["<",(e,t)=>Number(e)<t],[">=",(e,t)=>Number(e)>=t],["<=",(e,t)=>Number(e)<=t]]),s.aliasLinks=new Map([["lowercase",[]],["uppercase",[]],["substr",[]],["==",[]],["!=",[]],[">",[]],["<",[]],[">=",[]],["<=",[]]])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;const i=r(0),s=r(1),n=r(2);class a extends s.Renderable{constructor(...e){super(),this.members=[],e.length>0&&this.setMembers(...e)}getMembers(){return this.members}setMembers(...e){for(const t of e)this.addMember(t)}addMember(e){if(i.isString(e)){if(0===e.trim().length)return;e=new n.StringLiteral(e)}this.members.push(e)}internalRender(e){return this.members.reduce((t,r)=>t+r.render(e),"")}}t.Group=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.H=void 0;const i=r(4);var s=r(4);Object.defineProperty(t,"Aych",{enumerable:!0,get:function(){return s.Aych}}),t.H=new i.Aych,t.default=t.H},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyElement=void 0;const i=r(5);class s extends i.Element{internalRender(e){return`<${this.getTag()}${this.getHtmlAttributeList(e)}>`}}t.EmptyElement=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NestableElement=void 0;const i=r(5),s=r(0),n=r(7);class a extends i.Element{constructor(e,t,r,...a){if(super(e),this.children=new n.Group,s.isString(t)||s.isRenderable(t))s.isString(t)&&i.Element.isIdentifierString(t)?this.setIdentifierString(t):this.addChild(t);else{if(!s.isAttributes(t))return;this.setAttributes(t)}if(s.isString(r)||s.isRenderable(r))this.addChild(r);else{if(!s.isAttributes(r))return;if(s.isAttributes(t)&&s.isAttributes(r))throw new Error("Attributes field has been declared twice.");if(s.isRenderable(r)||s.isString(t)&&!i.Element.isIdentifierString(t))throw new Error("Attributes must come before children.");this.setAttributes(r)}a.length>0&&this.setChildren(...a)}getChildren(){return this.children.getMembers()}setChildren(...e){return this.children.setMembers(...e),this}addChild(e){return this.children.addMember(e),this}internalRender(e){const t=this.getTag();return`<${t}${this.getHtmlAttributeList(e)}>${this.children.render(e)}</${t}>`}}t.NestableElement=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Each=void 0;const i=r(0),s=r(1),n=r(2);class a extends s.Renderable{constructor(e,t,r="i",s="item"){super(),this.items=e,this.indexName=r,this.itemName=s,i.isString(t)?this.renderable=new n.StringLiteral(t):i.isRenderable(t)?this.renderable=t:this.renderFunction=t}empty(e){return this.ifEmptyRenderable=i.isString(e)?new n.StringLiteral(e):e,this}setIndexName(e){return this.indexName=e,this}setItemName(e){return this.itemName=e,this}internalRender(e){return this.isEmpty()?this.ifEmptyRenderable?this.ifEmptyRenderable.render():"":void 0===this.renderable?this.renderByFunction(e):this.renderByRenderable(e)}renderByRenderable(e){let t="",r=0;for(const s of this.items){const n={[this.itemName]:s,[this.indexName]:r};t+=this.renderable.render(i.merge(n,e)),r++}return t}renderByFunction(e){let t="",r=0;for(const s of this.items){let a=this.renderFunction(s,r,this.items);const o={[this.itemName]:s,[this.indexName]:r};i.isString(a)&&(a=new n.StringLiteral(a)),t+=a.render(i.merge(o,e)),r++}return t}isEmpty(){for(const e of this.items)return!1;return!0}}t.Each=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.If=void 0;const i=r(0),s=r(1),n=r(2),a=r(3);class o extends s.Renderable{constructor(e,t,r){super(),this.condition=e,this.ifRenderable=i.isString(t)?new n.StringLiteral(t):t,r&&this.else(r)}else(e){return this.elseRenderable=i.isString(e)?new n.StringLiteral(e):e,this}elif(e,t){return!this.condition&&e&&void 0===this.elifRenderable&&(this.elifRenderable=i.isString(t)?new n.StringLiteral(t):t),this}internalRender(e){return(i.isString(this.condition)?a.TemplateParser.evaluate(this.condition,e):this.condition)?this.ifRenderable.render(e):void 0!==this.elifRenderable?this.elifRenderable.render(e):this.elseRenderable?this.elseRenderable.render(e):""}}t.If=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Switch=void 0;const i=r(0),s=r(1),n=r(2);class a extends s.Renderable{constructor(e,...t){super(),this.cases=[],this.value=e,this.cases=t}default(e){return this.defaultRenderable=i.isString(e)?new n.StringLiteral(e):e,this}internalRender(e){const t=this.cases.find(e=>e.hasValue(this.value));return t?t.getRenderable().render(e):this.defaultRenderable?this.defaultRenderable.render(e):""}}t.Switch=a,function(e){e.Case=class{constructor(e,t){this.value=e,this.renderable=i.isString(t)?new n.StringLiteral(t):t}getRenderable(){return this.renderable}hasValue(e){return this.value===e}}}(a=t.Switch||(t.Switch={}))}]));